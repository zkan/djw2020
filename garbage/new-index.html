<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ไหวบ่ ? บ่อขยะ</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Chakra+Petch&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.6.6/jquery.fullPage.css" rel="stylesheet">
    <style>
    body {
        font-family: 'Chakra Petch', sans-serif;
        background-color: #000;
        color: #fff;
    }

    .scroll-icon {
        position: absolute;
        left: 50%;
        bottom: 30px;
        padding: 0 10px;
        -webkit-transform: translateX(-50%);
        -ms-transform: translateX(-50%);
        transform: translateX(-50%);
    }

    p {
        font-size: 20px;
    }

    section {
        text-align: center;
    }

    .green {
        color: #22b273;
    }

    .green-circle {
      width: 500px;
      height: 500px;
      border-radius: 100%;
      background-color: #22b273;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      position: absolute;
      transition: .8s;
      /* opacity: 0; */
    }
    .green-scale-up {
      width: 700px;
      height: 700px;
    }

    .big-bold {
        font-size: 28px;
        font-weight: 700;
    }

    .font-black {
        color: #000;
    }

    .how-produce {
        display: inline-block;
        margin-bottom: 40px;
        background-color: #000;
        color: #22b273;
        padding: 10px;
    }

    .img-gabage {
        position: absolute;
        left: 50%;
        bottom: -220px;
        padding: 0 10px;
        -webkit-transform: translateX(-50%);
        -ms-transform: translateX(-50%);
        transform: translateX(-50%);
        width: 100%;
        overflow: hidden;
    }
    .right-detail {
        display: inline-block;
        background-color: #000;
        padding: 20px;
    }
    .right-detail ul {
        list-style: none;
        line-height: 1.4;
    }

    .right-detail ul li {
        padding: 10px;
    }

    .bg-gabage {
        background-image:  url('./Design/SVG/background_garbage_bw.png');
        background-repeat: no-repeat;
        background-position: center center;
        background-attachment: scroll;
        background-size: cover;
    }

    .year-g {
        background-color:rgba(255, 255, 255, 0.8);
        border-radius: 5px;
        width: 80%;
        height: 100%;
    }

    .img-top-gabage {
        position: absolute;
        left: 50%;
        top: -400px;
        -webkit-transform: translateX(-50%);
        -ms-transform: translateX(-50%);
        transform: translateX(-50%);
        width: 100%;
        overflow: hidden;
    }

    .bg-top-gabage {
        overflow: hidden;
    }

    .head-bold {
        font-weight: 700;
    }

    .gabage-path {
        max-width: 60%;
        margin: 40px auto;
    }

    .font-20 {
        font-size: 20px;
    }

    .font-24 {
        font-size: 24px;
    }

    .bold {
        font-weight: 700;
    }

    .bangkok-have {
        margin: 60px 80px;
    }

    .white-bottom-box {
        height: 20%;
        width: 100%;
        background-color: #fff;
        position: absolute;
        bottom: 0;
    }

    .green-bottom-box {
        height: 20%;
        width: 100%;
        background-color: #22b273;
        position: absolute;
        top: 0;
    }

    .reserve-space {
        margin-top: 150px;
    }

    .green-bottom-box p {
        font-size: 28px;
    }

    .green-bottom-box .year {
        color: #000;
        font-size: 32px;
        font-weight: 700;
    }

    .circle-g {
        background-color: #55af79;
        width: 70px;
        height: 70px;
        border-radius: 100%;
        margin: 8px;
    }

    .circle-g:nth-child(2) {
        background-color: #469163;
    }

    .circle-g:nth-child(3) {
        background-color: #387651;
    }

    .circle-g:nth-child(4) {
       background-color: #29573d;
    }

    .circle-g:nth-child(5) {
       background-color: #1a3928;
    }

    .circle-g:nth-child(6) {
       background-color: #0d1d15;
    }

    .circle-g:nth-child(7) {
       background-color: #000;
    }

    .bg-black {
        background-color: black;
        text-align: left;
        padding: 120px;
    }

    .bg-black p {
        font-size: 24px;
    }

    .bg-black h1 {
        font-size: 48px;
        font-weight: 700;
    }

    .full-height {
        height: 100vh;
    }

    .y,
    .z,
    .left,
    .right {
        flex: 0 0 50%;
    }

    .box, .y {
        border: 1px solid #fff;
    }


    .left .box:nth-child(1) {
        height: 130%
    }

    .left .box:nth-child(2) {
        height: 80%
    }

    .left .box:nth-child(3) {
        height: 90%;
    }

    .right .box:nth-child(1) {
        height: 130%
    }

    .right .box:nth-child(2),.right .box:nth-child(3){
        height: 45%;
    }

    .right .box:nth-child(4) {
        height: 80%;
    }

    .right .box:nth-child(4) .y {
        height: 100%;
    }

    .box, 
    .right .box .y {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .box h1 {
        font-size: 48px;
        font-weight: 700;
    }
    .equal, .plus {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100%;
        transform: translate(-50%,-50%);
        font-size: 200px;
        font-weight: 700;

    }
    .plus {
        left: 76%;
    }

    </style>
</head>
<body>
    <div id="fullpage">
        <section class="vertical-scrolling">
            <h1>ไหวบ่ <span class="green">?</span> บ่อขยะ</h1>
            <p>บ่อขยะในกรุงเทพอาจจะมีปริมาณไม่เพียงพอ ขยะจะล้นเมือง<br />ถ้าคนกรุงเทพยังมีพฤติกรรมการบริโภคแบบเดิมๆ และยังไม่มีวิธีการแยกและกำจัดขยะที่เป็นระบบ</p>
            <div class="scroll-icon">
                <p>Scroll down</p>
                <a href="#secondSection" class="green"><i class="fas fa-chevron-down"></i></a>
            </div>
        </section>
        <section class="vertical-scrolling">
            <div class="green-circle d-flex flex-column justify-content-center">
                <p>รู้ไหมว่า...?</p>
                <p>คุณสร้างขยะไปเยอะแค่ไหน</p>
            </div>
        </section>
        <section class="vertical-scrolling">
            <div class="green-circle green-scale-up d-flex flex-column justify-content-center">
                <p>คุณอายุ 24 ปี</p>
                <p class="font-black"><i>โดยเฉลี่ยคนกรุงเทพ สร้างขยะต่อวัน = 10,526</i></p>
                <p class="big-bold">คุณสร้างขยะไปแล้ว xxx ตัน</p>
            </div>
        </section>
        <section class="vertical-scrolling">
            <div class="d-flex flex-column justify-content-center">
                <p>คุณอายุ 24 ปี</p>
                <p class="font-black"><i>โดยเฉลี่ยคนกรุงเทพ สร้างขยะต่อวัน/ต่อคน = xxxxxx</i></p>
                <p class="big-bold">คุณสร้างขยะไปแล้ว xxx ตัน</p>
            </div>
        </section>
        <section class="vertical-scrolling">
            <h1 class="how-produce">กรุงเทพผลิตขยะเท่าไหร่</h1>
            <img class="img-gabage" src="./Design/SVG/background_garbage_bw.png" />
        </section>
        <section class="vertical-scrolling bg-gabage">
            <h1 class="how-produce">กรุงเทพผลิตขยะเท่าไหร่</h1>
            <div class="row">
                <div class="col d-flex justify-content-end">
                    <div class="right-detail">
                        <ul>
                            <li>ข้อมูลจากสำนักสิ่งแวดล้อมกรุงเทพ ระบุว่า</li>
                            <li>ข้อมูลจากสำนักสิ่งแวดล้อมกรุงเทพ ระบุว่า</li>
                            <li>ข้อมูลจากสำนักสิ่งแวดล้อมกรุงเทพ ระบุว่า</li>
                            <li>ข้อมูลจากสำนักสิ่งแวดล้อมกรุงเทพ ระบุว่า</li>
                            <li>ข้อมูลจากสำนักสิ่งแวดล้อมกรุงเทพ ระบุว่า</li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <div class="year-g">ggg</div>
                </div>
            </div>
        </section>
        <section class="vertical-scrolling bg-top-gabage">
            <h1 class="how-produce">รู้หรือไม่ว่า ?</h1>
            <p class="big-bold">ขยะแต่ละชิ้นที่ปล่อยจากมือคุณ <br> มันเดินทางไปไหนต่อ</p>
            <img class="img-top-gabage" src="./Design/SVG/background_garbage_bw.png" />
        </section>
        <section class="vertical-scrolling">
            <h2 class="head-bold">เส้นทางขยะจากกรุงเทพ</h2>
            <img class="gabage-path" src="./Design/SVG/pieces/Asset 7.svg" />
            <p class="small">ข้อมูลจาก : https://www.thebangkokinsight.com/193971/</p>
        </section>
        <section class="vertical-scrolling">
            <h2 class="head-bold">ปัจจุบัน กรุงเทพมี</h2>
            <div class="row bangkok-have">
                <div class="col"><img src="./Design/SVG/pieces/Asset 8.svg" /></div>
                <div class="col"><img src="./Design/SVG/pieces/Asset 9.svg" /></div>
                <div class="col"><img src="./Design/SVG/pieces/Asset 10.svg" /></div>
                <div class="col"><img src="./Design/SVG/pieces/Asset 11.svg" /></div>
            </div>
            <p class="font-20">มารับและขนส่งขยะเหล่านั้นออกไป จากย่านที่ชุมชนแล้วเอาไว้ที่บ่อขยะเหล่านี้ เพื่อ <span class="font-24 bold">ฝังกลบ?</p>
        </section>
        <section class="vertical-scrolling">
            <h1 class="how-produce">แต่คุณรู้หรือไม่ว่า ?</h1>
            <p class="big-bold">บ่อขยะที่มีอยู่ในกรุงเทพตอนนี้<br> มีความสามารถในการรองรับขยะแค่ไหน</p>
            <div class="white-bottom-box"></div>
        </section>
        <section class="vertical-scrolling">
            <div class="green-bottom-box d-flex align-items-center justify-content-around">
                <p>ปริมาณขยะมูลฝอยแต่ละเขต</p>
                <p class="year">2560</p>
                <p>จำนวนประชากรแต่ละเขต</p>
            </div>
            <div class="row">
                <div class="col-3 d-flex flex-column align-items-center justify-content-center reserve-space">
                    <div class="circle-g"></div>
                    <div class="circle-g"></div>
                    <div class="circle-g"></div>
                    <div class="circle-g"></div>
                    <div class="circle-g"></div>
                    <div class="circle-g"></div>
                    <div class="circle-g"></div>
                </div>
                <div class="col-9">
                </div>
            </div>
            <div id="garbage-amount-map-2"></div>
        </section>
        <section class="vertical-scrolling">
            <div class="row full-height">
                <div class="col-6 bg-black d-flex justify-content-center flex-column">
                    <p>หากปริมาณขยะเพิ่มขึ้นเรื่อยๆ โดยยังไม่ทำอะไรในอีก ... ปี <br> ก็ต้องหาบ่อขยะแห่งอื่นมารองรับขยะฝังกลบเหล่านี้</p>
                    <h1>XXX ตร.กม.</h1>
                </div>
                <div class="col-6">
                    <div class="row">
                        <div class="left">
                            <div class="box"><h1>เขต A</h1></div>
                            <div class="box"><h1>เขต B</h1></div>
                            <div class="box"><h1>เขต C</h1></div>
                        </div>
                        <div class="right">
                            <div class="box"><h1>เขต D</h1></div>
                            <div class="box"><h1>เขต E</h1></div>
                            <div class="box"><h1>เขต F</h1></div>
                            <div class="box d-flex">
                                <div class="y"><h1>Y</h1></div>
                                <div class="z"><h1>Z</h1></div>
                            </div>
                        </div>
                    </div>
                </div>
                <h1 class="equal">=</h1>
                <h1 class="plus">+</h1>
            </div>
        </section>
        <section class="vertical-scrolling">
            <div id="garbage-budget-bkk"></div>
        </section>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.6.6/jquery.fullPage.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script>

    // fullpage customization
    $('#fullpage').fullpage({
        sectionsColor: ['#000', '#000', '#000', '#22b273', '#22b273', '#22b273', '#22b273', '#22b273', '#22b273', '#22b273', '#fff', '#22b273', '#fff'],
        sectionSelector: '.vertical-scrolling',
        navigation: false,
        slidesNavigation: true,
        anchors: [
          'firstSection',
          'secondSection',
          'thirdSection',
          'fourthSection',
          'fifthSection',
          'sixthSection',
          'seventhSection',
          'eighthSection',
          'ninthSection',
          'tenthSection',
          'eleventhSection',
          'twelvethSection',
          'thirteenthSection',
        ],
    });

      const circleScale = d3.scaleSqrt().domain([55, 390]).range([0, 20])
      d3.csv('garbage-amount-full.csv').then(districtCoordinates => {
        const svgContainer1 = d3.select("#garbage-amount-map-1").append("svg")
                                                             .attr("width", 800)
                                                             .attr("height", 600)

        const circles1 = svgContainer1.selectAll("circle")
                                    .data(districtCoordinates)
                                    .enter()
                                    .append("circle")

        const circleAttributes1 = circles1
                                 .attr("cx", d => d.x)
                                 .attr("cy", d => d.y)
                                 .attr("r", d => circleScale(d.amount2559))
                                 .style("fill", "#22b273")

        const svgContainer2 = d3.select("#garbage-amount-map-2").append("svg")
                                                             .attr("width", 800)
                                                             .attr("height", 600)

        const circles2 = svgContainer2.selectAll("circle")
                                    .data(districtCoordinates)
                                    .enter()
                                    .append("circle")

        const circleAttributes2 = circles2
                                 .attr("cx", d => d.x)
                                 .attr("cy", d => d.y)
                                 .attr("r", d => circleScale(d.amount2560))
                                 .style("fill", "#22b273")

        const svgContainer3 = d3.select("#garbage-amount-map-3").append("svg")
                                                             .attr("width", 800)
                                                             .attr("height", 600)

        const circles3 = svgContainer3.selectAll("circle")
                                    .data(districtCoordinates)
                                    .enter()
                                    .append("circle")

        const circleAttributes3 = circles3
                                 .attr("cx", d => d.x)
                                 .attr("cy", d => d.y)
                                 .attr("r", d => circleScale(d.amount2561))
                                 .style("fill", "#22b273")
      })

    var margin = {top: 10, right: 30, bottom: 20, left: 50}
    var height = 600
    var width = 800
    var svg = d3.select("#garbage-budget-bkk")
      .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

    d3.csv("budget.csv").then(d => chart(d))

    const chart = data => {
      console.log(data)
      var keys = data.columns.slice(2)
      var groups = d3.map(data, function(d){return(d.group)}).keys()

      var x = d3.scaleBand()
          .domain(groups)
          .range([0, width])
          .padding([0.2])
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x).tickSizeOuter(0));

      var y = d3.scaleLinear()
        .domain([0, 60])
        .range([ height, 0 ]);
      svg.append("g")
        .call(d3.axisLeft(y));

      var stackedData = d3.stack()
        .keys(keys)
        (data)

      console.log(stackedData)

      var color = d3.scaleOrdinal()
        .domain(keys)
        .range(['#e41a1c','#377eb8','#4daf4a'])

      svg.append("g")
        .selectAll("g")
        // Enter in the stack data = loop key per key = group per group
        .data(stackedData)
        .enter().append("g")
          .attr("fill", function(d) { return color(d.key); })
          .selectAll("rect")
          // enter a second time = loop subgroup per subgroup to add all rectangles
          .data(function(d) { return d; })
          .enter().append("rect")
            .attr("x", function(d) { return x(d.data.group); })
            .attr("y", function(d) { return y(d[1]); })
            .attr("height", function(d) { return y(d[0]) - y(d[1]); })
            .attr("width",x.bandwidth())
    }
  </script>
</body>
</html>
